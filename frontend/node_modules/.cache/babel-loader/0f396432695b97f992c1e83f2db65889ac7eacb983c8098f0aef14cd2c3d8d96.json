{"ast":null,"code":"import { ref, reactive, computed, onMounted, nextTick, onBeforeUnmount } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { useAuthStore } from '@/store/auth';\nimport { useMonitoringStore } from '@/store/monitoring';\nimport { ElMessage, ElMessageBox } from 'element-plus';\nimport * as echarts from 'echarts';\nexport default {\n  name: 'MonitoringSystemPage',\n  setup() {\n    const router = useRouter();\n    const authStore = useAuthStore();\n    const monitoringStore = useMonitoringStore();\n\n    // 侧边栏状态\n    const isCollapse = ref(false);\n    const activeMenu = ref('/admin/monitoring');\n\n    // 用户信息\n    const userName = computed(() => authStore.user?.name || '用户');\n    const userAvatar = computed(() => authStore.user?.avatar || '');\n    const userInitials = computed(() => {\n      const name = authStore.user?.name || '';\n      return name.substring(0, 1).toUpperCase();\n    });\n    const isAdmin = computed(() => authStore.isAdmin);\n\n    // 数据刷新状态\n    const isRefreshing = ref(false);\n    const lastUpdatedTime = ref(formatDateTime(new Date()));\n\n    // 图表引用\n    const pigDistributionChart = ref(null);\n    const feedConsumptionChart = ref(null);\n    let pigChart = null;\n    let feedChart = null;\n\n    // 猪群数据类型\n    const pigDataType = ref('weight');\n\n    // 饲料时间范围\n    const feedTimeRange = ref('week');\n\n    // 告警相关\n    const alertsTab = ref('active');\n    const alertsLoading = ref(false);\n    const alertsPage = ref(1);\n    const alertsPageSize = ref(10);\n    const totalActiveAlerts = ref(0);\n    const totalHistoryAlerts = ref(0);\n    const alertDialogVisible = ref(false);\n    const selectedAlert = ref(null);\n\n    // 活跃告警数量\n    const activeAlertsCount = computed(() => activeAlerts.value.length);\n\n    // 监控区域数据\n    const monitoringAreas = ref([{\n      id: 1,\n      name: '1号猪舍',\n      status: '正常',\n      temperature: {\n        value: 25.6,\n        trend: 0.5\n      },\n      humidity: {\n        value: 65,\n        trend: -2\n      },\n      ammonia: {\n        value: 5,\n        trend: 0\n      }\n    }, {\n      id: 2,\n      name: '2号猪舍',\n      status: '正常',\n      temperature: {\n        value: 26.2,\n        trend: 1.2\n      },\n      humidity: {\n        value: 62,\n        trend: -1\n      },\n      ammonia: {\n        value: 6,\n        trend: 0.5\n      }\n    }, {\n      id: 3,\n      name: '3号猪舍',\n      status: '警告',\n      temperature: {\n        value: 29.8,\n        trend: 3.5\n      },\n      humidity: {\n        value: 58,\n        trend: -5\n      },\n      ammonia: {\n        value: 8,\n        trend: 2\n      }\n    }, {\n      id: 4,\n      name: '4号猪舍',\n      status: '正常',\n      temperature: {\n        value: 24.9,\n        trend: -0.3\n      },\n      humidity: {\n        value: 68,\n        trend: 2\n      },\n      ammonia: {\n        value: 4,\n        trend: -1\n      }\n    }]);\n\n    // 猪群状态数据\n    const pigStatus = reactive({\n      totalCount: 1256,\n      countTrend: 2.5,\n      avgWeight: 78.3,\n      weightTrend: 1.8,\n      dailyGain: 0.85,\n      gainTrend: 3.2,\n      healthRate: 91.5,\n      healthTrend: -0.5\n    });\n\n    // 饲料库存数据\n    const feedStocks = ref([{\n      id: 1,\n      name: '标准饲料A',\n      current: 2800,\n      capacity: 5000,\n      estimatedDays: 14\n    }, {\n      id: 2,\n      name: '生长促进饲料B',\n      current: 1200,\n      capacity: 3000,\n      estimatedDays: 8\n    }, {\n      id: 3,\n      name: '营养强化饲料C',\n      current: 450,\n      capacity: 2000,\n      estimatedDays: 4\n    }]);\n\n    // 摄像头数据\n    const cameraStreams = ref([{\n      id: 1,\n      name: '1号猪舍-入口',\n      status: 'online',\n      streamUrl: 'https://example.com/stream1.jpg'\n    }, {\n      id: 2,\n      name: '1号猪舍-中部',\n      status: 'online',\n      streamUrl: 'https://example.com/stream2.jpg'\n    }, {\n      id: 3,\n      name: '2号猪舍-入口',\n      status: 'online',\n      streamUrl: 'https://example.com/stream3.jpg'\n    }, {\n      id: 4,\n      name: '3号猪舍-中部',\n      status: 'offline',\n      streamUrl: ''\n    }, {\n      id: 5,\n      name: '4号猪舍-入口',\n      status: 'online',\n      streamUrl: 'https://example.com/stream5.jpg'\n    }]);\n\n    // 告警数据\n    const activeAlerts = ref([{\n      id: 1,\n      time: '2025-03-15 08:23:45',\n      area: '3号猪舍',\n      type: '温度异常',\n      level: '警告',\n      message: '温度过高 (29.8°C)',\n      description: '3号猪舍温度持续30分钟超过29°C，已超过预设阈值(28°C)。',\n      parameters: {\n        '当前温度': '29.8°C',\n        '阈值': '28°C',\n        '持续时间': '30分钟'\n      }\n    }, {\n      id: 2,\n      time: '2025-03-15 07:45:12',\n      area: '2号猪舍',\n      type: '设备异常',\n      level: '一般',\n      message: '饲喂机#2运行异常',\n      description: '饲喂机#2运行时出现异常噪音，可能需要维护检查。',\n      parameters: {\n        '设备ID': 'FEEDER-002',\n        '异常类型': '噪音异常',\n        '上次维护': '2025-02-28'\n      }\n    }, {\n      id: 3,\n      time: '2025-03-15 06:12:33',\n      area: '全场',\n      type: '系统警告',\n      level: '一般',\n      message: '数据备份延迟',\n      description: '系统数据备份已延迟超过12小时，请检查备份服务状态。',\n      parameters: {\n        '上次备份': '2025-03-14 18:00:05',\n        '延迟时间': '12小时12分钟',\n        '影响服务': '历史数据查询'\n      }\n    }]);\n    const historyAlerts = ref([{\n      id: 101,\n      time: '2025-03-14 14:23:45',\n      area: '1号猪舍',\n      type: '湿度异常',\n      level: '警告',\n      message: '湿度过低 (45%)',\n      description: '1号猪舍湿度持续45分钟低于50%，已低于预设阈值(50%)。',\n      parameters: {\n        '当前湿度': '45%',\n        '阈值': '50%',\n        '持续时间': '45分钟'\n      },\n      resolvedBy: '张工程师',\n      resolvedTime: '2025-03-14 15:10:22',\n      resolution: '已调整通风系统，湿度恢复正常'\n    }, {\n      id: 102,\n      time: '2025-03-14 10:15:33',\n      area: '4号猪舍',\n      type: '氨气异常',\n      level: '严重',\n      message: '氨气浓度过高 (15ppm)',\n      description: '4号猪舍氨气浓度达到15ppm，已超过危险阈值(10ppm)。',\n      parameters: {\n        '当前浓度': '15ppm',\n        '阈值': '10ppm',\n        '持续时间': '15分钟'\n      },\n      resolvedBy: '李主管',\n      resolvedTime: '2025-03-14 11:05:18',\n      resolution: '已增强通风并清理粪污，浓度已降至安全水平'\n    }]);\n\n    // 方法\n    const toggleSidebar = () => {\n      isCollapse.value = !isCollapse.value;\n    };\n    const handleCommand = command => {\n      if (command === 'logout') {\n        ElMessageBox.confirm('确定要退出登录吗?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          authStore.logout();\n          router.push('/');\n          ElMessage.success('已成功退出登录');\n        }).catch(() => {});\n      } else if (command === 'profile') {\n        router.push('/admin/profile');\n      } else if (command === 'settings') {\n        router.push('/admin/settings');\n      }\n    };\n    const refreshData = async () => {\n      try {\n        isRefreshing.value = true;\n        await monitoringStore.fetchAllMonitoringData();\n        lastUpdatedTime.value = formatDateTime(new Date());\n        ElMessage.success('数据已刷新');\n      } catch (error) {\n        console.error('刷新数据错误:', error);\n        ElMessage.error('刷新数据失败，请稍后再试');\n      } finally {\n        isRefreshing.value = false;\n      }\n    };\n\n    // 格式化日期时间\n    function formatDateTime(date) {\n      return date.toLocaleString('zh-CN', {\n        year: 'numeric',\n        month: '2-digit',\n        day: '2-digit',\n        hour: '2-digit',\n        minute: '2-digit',\n        second: '2-digit',\n        hour12: false\n      });\n    }\n\n    // 环境参数相关方法\n    const getAreaStatusType = status => {\n      const statusMap = {\n        '正常': 'success',\n        '警告': 'warning',\n        '异常': 'danger'\n      };\n      return statusMap[status] || 'info';\n    };\n    const getParamColor = (value, type) => {\n      if (type === 'temperature') {\n        if (value > 28) return '#F56C6C';\n        if (value < 20) return '#409EFF';\n        return '#67C23A';\n      } else if (type === 'humidity') {\n        if (value > 80) return '#F56C6C';\n        if (value < 50) return '#E6A23C';\n        return '#67C23A';\n      } else if (type === 'ammonia') {\n        if (value > 10) return '#F56C6C';\n        if (value > 7) return '#E6A23C';\n        return '#67C23A';\n      }\n      return '#909399';\n    };\n    const getParamClass = (value, type) => {\n      if (type === 'temperature') {\n        if (value > 28) return 'param-danger';\n        if (value < 20) return 'param-warning';\n        return 'param-normal';\n      } else if (type === 'humidity') {\n        if (value > 80) return 'param-danger';\n        if (value < 50) return 'param-warning';\n        return 'param-normal';\n      } else if (type === 'ammonia') {\n        if (value > 10) return 'param-danger';\n        if (value > 7) return 'param-warning';\n        return 'param-normal';\n      }\n      return 'param-normal';\n    };\n    const viewAreaDetails = area => {\n      router.push(`/admin/monitoring/area/${area.id}`);\n    };\n    const viewAreaHistory = area => {\n      router.push(`/admin/monitoring/area/${area.id}/history`);\n    };\n\n    // 猪群相关方法\n    const viewPigDetails = () => {\n      router.push('/admin/monitoring/pigs');\n    };\n    const exportPigData = () => {\n      ElMessage.success('猪群数据导出功能开发中');\n    };\n\n    // 饲料相关方法\n    const getFeedStockClass = feed => {\n      const percentage = feed.current / feed.capacity * 100;\n      if (percentage < 20) return 'stock-danger';\n      if (percentage < 40) return 'stock-warning';\n      return 'stock-normal';\n    };\n    const getFeedStockStatus = feed => {\n      const percentage = feed.current / feed.capacity * 100;\n      if (percentage < 20) return 'exception';\n      if (percentage < 40) return 'warning';\n      return 'success';\n    };\n    const orderFeed = feed => {\n      ElMessageBox.confirm(`确定要为\"${feed.name}\"补充库存吗?`, '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'info'\n      }).then(() => {\n        ElMessage.success(`已创建\"${feed.name}\"的补充库存订单`);\n      }).catch(() => {});\n    };\n\n    // 摄像头相关方法\n    const viewFullscreen = camera => {\n      ElMessage.info(`全屏查看${camera.name}功能开发中`);\n    };\n    const viewRecordings = camera => {\n      router.push(`/admin/monitoring/camera/${camera.id}/recordings`);\n    };\n    const cameraSettings = camera => {\n      router.push(`/admin/monitoring/camera/${camera.id}/settings`);\n    };\n\n    // 告警相关方法\n    const getAlertTypeTag = type => {\n      const typeMap = {\n        '温度异常': 'danger',\n        '湿度异常': 'warning',\n        '氨气异常': 'danger',\n        '设备异常': 'info',\n        '系统警告': 'warning'\n      };\n      return typeMap[type] || 'info';\n    };\n    const getAlertLevelTag = level => {\n      const levelMap = {\n        '严重': 'danger',\n        '警告': 'warning',\n        '一般': 'info'\n      };\n      return levelMap[level] || 'info';\n    };\n    const showAlerts = () => {\n      alertsTab.value = 'active';\n      window.scrollTo({\n        top: document.querySelector('.alerts-card').offsetTop - 80,\n        behavior: 'smooth'\n      });\n    };\n    const acknowledgeAlert = async alert => {\n      try {\n        await monitoringStore.acknowledgeAlert(alert.id);\n        ElMessage.success(`已确认告警: ${alert.message}`);\n        // 在实际应用中，这里应该重新获取告警列表\n        activeAlerts.value = activeAlerts.value.filter(a => a.id !== alert.id);\n      } catch (error) {\n        ElMessage.error('确认告警失败，请稍后再试');\n      }\n    };\n    const acknowledgeAllAlerts = async () => {\n      ElMessageBox.confirm('确定要确认所有活跃告警吗?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(async () => {\n        try {\n          alertsLoading.value = true;\n          // 在实际应用中，这里应该调用批量确认API\n          await new Promise(resolve => setTimeout(resolve, 1000));\n          activeAlerts.value = [];\n          ElMessage.success('已确认所有告警');\n        } catch (error) {\n          ElMessage.error('确认告警失败，请稍后再试');\n        } finally {\n          alertsLoading.value = false;\n        }\n      }).catch(() => {});\n    };\n    const viewAlertDetails = alert => {\n      selectedAlert.value = alert;\n      alertDialogVisible.value = true;\n    };\n    const acknowledgeAlertFromDialog = async () => {\n      if (!selectedAlert.value) return;\n      try {\n        await monitoringStore.acknowledgeAlert(selectedAlert.value.id);\n        ElMessage.success(`已确认告警: ${selectedAlert.value.message}`);\n        activeAlerts.value = activeAlerts.value.filter(a => a.id !== selectedAlert.value.id);\n        alertDialogVisible.value = false;\n      } catch (error) {\n        ElMessage.error('确认告警失败，请稍后再试');\n      }\n    };\n    const exportAlerts = () => {\n      ElMessage.success('告警数据导出功能开发中');\n    };\n    const handleAlertsPageChange = page => {\n      alertsPage.value = page;\n      // 在实际应用中，这里应该重新获取告警列表\n    };\n    const handleAlertsPageSizeChange = size => {\n      alertsPageSize.value = size;\n      // 在实际应用中，这里应该重新获取告警列表\n    };\n\n    // 初始化图表\n    const initCharts = () => {\n      // 猪群分布图\n      if (pigDistributionChart.value) {\n        pigChart = echarts.init(pigDistributionChart.value);\n        updatePigChart();\n\n        // 响应窗口大小变化\n        window.addEventListener('resize', () => {\n          pigChart.resize();\n        });\n      }\n\n      // 饲料消耗趋势图\n      if (feedConsumptionChart.value) {\n        feedChart = echarts.init(feedConsumptionChart.value);\n        updateFeedChart();\n\n        // 响应窗口大小变化\n        window.addEventListener('resize', () => {\n          feedChart.resize();\n        });\n      }\n    };\n\n    // 更新猪群分布图\n    const updatePigChart = () => {\n      if (!pigChart) return;\n      let option = {};\n      if (pigDataType.value === 'weight') {\n        option = {\n          title: {\n            text: '猪群体重分布',\n            left: 'center'\n          },\n          tooltip: {\n            trigger: 'item',\n            formatter: '{a} <br/>{b}: {c} ({d}%)'\n          },\n          legend: {\n            orient: 'vertical',\n            left: 10,\n            data: ['<50kg', '50-80kg', '80-100kg', '100-120kg', '>120kg']\n          },\n          series: [{\n            name: '体重分布',\n            type: 'pie',\n            radius: ['40%', '70%'],\n            avoidLabelOverlap: false,\n            itemStyle: {\n              borderRadius: 10,\n              borderColor: '#fff',\n              borderWidth: 2\n            },\n            label: {\n              show: false,\n              position: 'center'\n            },\n            emphasis: {\n              label: {\n                show: true,\n                fontSize: '18',\n                fontWeight: 'bold'\n              }\n            },\n            labelLine: {\n              show: false\n            },\n            data: [{\n              value: 150,\n              name: '<50kg'\n            }, {\n              value: 320,\n              name: '50-80kg'\n            }, {\n              value: 480,\n              name: '80-100kg'\n            }, {\n              value: 250,\n              name: '100-120kg'\n            }, {\n              value: 56,\n              name: '>120kg'\n            }]\n          }]\n        };\n      } else if (pigDataType.value === 'age') {\n        option = {\n          title: {\n            text: '猪群年龄分布',\n            left: 'center'\n          },\n          tooltip: {\n            trigger: 'axis',\n            axisPointer: {\n              type: 'shadow'\n            }\n          },\n          grid: {\n            left: '3%',\n            right: '4%',\n            bottom: '3%',\n            containLabel: true\n          },\n          xAxis: {\n            type: 'category',\n            data: ['<1月', '1-2月', '2-3月', '3-4月', '4-5月', '5-6月', '>6月']\n          },\n          yAxis: {\n            type: 'value'\n          },\n          series: [{\n            name: '数量',\n            type: 'bar',\n            data: [120, 200, 280, 350, 190, 80, 36],\n            itemStyle: {\n              color: function (params) {\n                const colorList = ['#91cc75', '#5470c6', '#ee6666', '#73c0de', '#3ba272', '#fc8452', '#9a60b4'];\n                return colorList[params.dataIndex];\n              }\n            }\n          }]\n        };\n      } else if (pigDataType.value === 'health') {\n        option = {\n          title: {\n            text: '猪群健康状态',\n            left: 'center'\n          },\n          tooltip: {\n            trigger: 'item',\n            formatter: '{a} <br/>{b}: {c} ({d}%)'\n          },\n          legend: {\n            orient: 'vertical',\n            left: 10,\n            data: ['健康', '需观察', '生病', '治疗中', '隔离']\n          },\n          series: [{\n            name: '健康状态',\n            type: 'pie',\n            radius: '70%',\n            center: ['50%', '50%'],\n            data: [{\n              value: 1150,\n              name: '健康',\n              itemStyle: {\n                color: '#67C23A'\n              }\n            }, {\n              value: 65,\n              name: '需观察',\n              itemStyle: {\n                color: '#E6A23C'\n              }\n            }, {\n              value: 15,\n              name: '生病',\n              itemStyle: {\n                color: '#F56C6C'\n              }\n            }, {\n              value: 18,\n              name: '治疗中',\n              itemStyle: {\n                color: '#409EFF'\n              }\n            }, {\n              value: 8,\n              name: '隔离',\n              itemStyle: {\n                color: '#909399'\n              }\n            }],\n            emphasis: {\n              itemStyle: {\n                shadowBlur: 10,\n                shadowOffsetX: 0,\n                shadowColor: 'rgba(0, 0, 0, 0.5)'\n              }\n            }\n          }]\n        };\n      }\n      pigChart.setOption(option);\n    };\n\n    // 更新饲料消耗趋势图\n    const updateFeedChart = () => {\n      if (!feedChart) return;\n      let xAxisData = [];\n      let seriesData = [];\n      if (feedTimeRange.value === 'week') {\n        xAxisData = ['周一', '周二', '周三', '周四', '周五', '周六', '周日'];\n        seriesData = [{\n          name: '标准饲料A',\n          data: [120, 132, 125, 128, 130, 115, 122]\n        }, {\n          name: '生长促进饲料B',\n          data: [80, 85, 82, 78, 83, 75, 80]\n        }, {\n          name: '营养强化饲料C',\n          data: [40, 38, 42, 45, 40, 35, 38]\n        }];\n      } else if (feedTimeRange.value === 'month') {\n        xAxisData = Array.from({\n          length: 30\n        }, (_, i) => `${i + 1}日`);\n        seriesData = [{\n          name: '标准饲料A',\n          data: Array.from({\n            length: 30\n          }, () => Math.floor(Math.random() * 30 + 110))\n        }, {\n          name: '生长促进饲料B',\n          data: Array.from({\n            length: 30\n          }, () => Math.floor(Math.random() * 20 + 70))\n        }, {\n          name: '营养强化饲料C',\n          data: Array.from({\n            length: 30\n          }, () => Math.floor(Math.random() * 15 + 30))\n        }];\n      } else if (feedTimeRange.value === 'quarter') {\n        xAxisData = ['1月', '2月', '3月'];\n        seriesData = [{\n          name: '标准饲料A',\n          data: [3600, 3800, 3750]\n        }, {\n          name: '生长促进饲料B',\n          data: [2400, 2500, 2450]\n        }, {\n          name: '营养强化饲料C',\n          data: [1200, 1150, 1250]\n        }];\n      }\n      const option = {\n        title: {\n          text: '饲料消耗趋势',\n          left: 'center'\n        },\n        tooltip: {\n          trigger: 'axis',\n          axisPointer: {\n            type: 'cross',\n            label: {\n              backgroundColor: '#6a7985'\n            }\n          }\n        },\n        legend: {\n          data: ['标准饲料A', '生长促进饲料B', '营养强化饲料C'],\n          top: 30\n        },\n        grid: {\n          left: '3%',\n          right: '4%',\n          bottom: '3%',\n          containLabel: true\n        },\n        xAxis: {\n          type: 'category',\n          boundaryGap: false,\n          data: xAxisData\n        },\n        yAxis: {\n          type: 'value',\n          name: '消耗量 (kg)'\n        },\n        series: seriesData.map(item => ({\n          name: item.name,\n          type: 'line',\n          stack: 'Total',\n          areaStyle: {},\n          emphasis: {\n            focus: 'series'\n          },\n          data: item.data\n        }))\n      };\n      feedChart.setOption(option);\n    };\n\n    // 生命周期钩子\n    onMounted(async () => {\n      // 获取数据\n      try {\n        await monitoringStore.fetchAllMonitoringData();\n      } catch (error) {\n        console.error('获取监控数据错误:', error);\n      }\n\n      // 初始化图表\n      nextTick(() => {\n        initCharts();\n      });\n\n      // 设置定时刷新\n      const refreshInterval = setInterval(() => {\n        refreshData();\n      }, 300000); // 每5分钟刷新一次\n\n      // 组件卸载时清除定时器\n      onBeforeUnmount(() => {\n        clearInterval(refreshInterval);\n      });\n    });\n    return {\n      // 状态\n      isCollapse,\n      activeMenu,\n      userName,\n      userAvatar,\n      userInitials,\n      isAdmin,\n      isRefreshing,\n      lastUpdatedTime,\n      pigDistributionChart,\n      feedConsumptionChart,\n      pigDataType,\n      feedTimeRange,\n      monitoringAreas,\n      pigStatus,\n      feedStocks,\n      cameraStreams,\n      activeAlerts,\n      historyAlerts,\n      alertsTab,\n      alertsLoading,\n      alertsPage,\n      alertsPageSize,\n      totalActiveAlerts,\n      totalHistoryAlerts,\n      activeAlertsCount,\n      alertDialogVisible,\n      selectedAlert,\n      // 方法\n      toggleSidebar,\n      handleCommand,\n      refreshData,\n      getAreaStatusType,\n      getParamColor,\n      getParamClass,\n      viewAreaDetails,\n      viewAreaHistory,\n      updatePigChart,\n      updateFeedChart,\n      viewPigDetails,\n      exportPigData,\n      getFeedStockClass,\n      getFeedStockStatus,\n      orderFeed,\n      viewFullscreen,\n      viewRecordings,\n      cameraSettings,\n      getAlertTypeTag,\n      getAlertLevelTag,\n      showAlerts,\n      acknowledgeAlert,\n      acknowledgeAllAlerts,\n      viewAlertDetails,\n      acknowledgeAlertFromDialog,\n      exportAlerts,\n      handleAlertsPageChange,\n      handleAlertsPageSizeChange\n    };\n  }\n};","map":{"version":3,"names":["ref","reactive","computed","onMounted","nextTick","onBeforeUnmount","useRouter","useAuthStore","useMonitoringStore","ElMessage","ElMessageBox","echarts","name","setup","router","authStore","monitoringStore","isCollapse","activeMenu","userName","user","userAvatar","avatar","userInitials","substring","toUpperCase","isAdmin","isRefreshing","lastUpdatedTime","formatDateTime","Date","pigDistributionChart","feedConsumptionChart","pigChart","feedChart","pigDataType","feedTimeRange","alertsTab","alertsLoading","alertsPage","alertsPageSize","totalActiveAlerts","totalHistoryAlerts","alertDialogVisible","selectedAlert","activeAlertsCount","activeAlerts","value","length","monitoringAreas","id","status","temperature","trend","humidity","ammonia","pigStatus","totalCount","countTrend","avgWeight","weightTrend","dailyGain","gainTrend","healthRate","healthTrend","feedStocks","current","capacity","estimatedDays","cameraStreams","streamUrl","time","area","type","level","message","description","parameters","historyAlerts","resolvedBy","resolvedTime","resolution","toggleSidebar","handleCommand","command","confirm","confirmButtonText","cancelButtonText","then","logout","push","success","catch","refreshData","fetchAllMonitoringData","error","console","date","toLocaleString","year","month","day","hour","minute","second","hour12","getAreaStatusType","statusMap","getParamColor","getParamClass","viewAreaDetails","viewAreaHistory","viewPigDetails","exportPigData","getFeedStockClass","feed","percentage","getFeedStockStatus","orderFeed","viewFullscreen","camera","info","viewRecordings","cameraSettings","getAlertTypeTag","typeMap","getAlertLevelTag","levelMap","showAlerts","window","scrollTo","top","document","querySelector","offsetTop","behavior","acknowledgeAlert","alert","filter","a","acknowledgeAllAlerts","Promise","resolve","setTimeout","viewAlertDetails","acknowledgeAlertFromDialog","exportAlerts","handleAlertsPageChange","page","handleAlertsPageSizeChange","size","initCharts","init","updatePigChart","addEventListener","resize","updateFeedChart","option","title","text","left","tooltip","trigger","formatter","legend","orient","data","series","radius","avoidLabelOverlap","itemStyle","borderRadius","borderColor","borderWidth","label","show","position","emphasis","fontSize","fontWeight","labelLine","axisPointer","grid","right","bottom","containLabel","xAxis","yAxis","color","params","colorList","dataIndex","center","shadowBlur","shadowOffsetX","shadowColor","setOption","xAxisData","seriesData","Array","from","_","i","Math","floor","random","backgroundColor","boundaryGap","map","item","stack","areaStyle","focus","refreshInterval","setInterval","clearInterval"],"sources":["C:\\Users\\Scott\\Downloads\\毕设\\frontend\\src\\views\\admin\\MonitoringSystem.vue"],"sourcesContent":["<template>\r\n  <div class=\"monitoring-page\">\r\n    <el-container>\r\n      <!-- 侧边栏 -->\r\n      <el-aside width=\"250px\" class=\"sidebar\">\r\n        <div class=\"logo-container\">\r\n          <img src=\"@/assets/logo.png\" alt=\"泓泰生物科技\" class=\"logo\" />\r\n          <h2>智能养殖管理系统</h2>\r\n        </div>\r\n        \r\n        <el-menu\r\n          :default-active=\"activeMenu\"\r\n          class=\"sidebar-menu\"\r\n          router\r\n          background-color=\"#001529\"\r\n          text-color=\"#fff\"\r\n          active-text-color=\"#409EFF\"\r\n        >\r\n          <el-menu-item index=\"/admin\">\r\n            <el-icon><HomeFilled /></el-icon>\r\n            <span>控制台</span>\r\n          </el-menu-item>\r\n          \r\n          <el-menu-item index=\"/admin/monitoring\">\r\n            <el-icon><Monitor /></el-icon>\r\n            <span>生产监控</span>\r\n          </el-menu-item>\r\n          \r\n          <el-sub-menu index=\"data\">\r\n            <template #title>\r\n              <el-icon><DataLine /></el-icon>\r\n              <span>数据分析</span>\r\n            </template>\r\n            <el-menu-item index=\"/admin/data/environment\">环境数据</el-menu-item>\r\n            <el-menu-item index=\"/admin/data/production\">生产数据</el-menu-item>\r\n            <el-menu-item index=\"/admin/data/reports\">报表中心</el-menu-item>\r\n          </el-sub-menu>\r\n          \r\n          <el-menu-item index=\"/admin/devices\">\r\n            <el-icon><Connection /></el-icon>\r\n            <span>设备管理</span>\r\n          </el-menu-item>\r\n          \r\n          <el-menu-item v-if=\"isAdmin\" index=\"/admin/employees\">\r\n            <el-icon><User /></el-icon>\r\n            <span>员工管理</span>\r\n          </el-menu-item>\r\n          \r\n          <el-menu-item index=\"/admin/settings\">\r\n            <el-icon><Setting /></el-icon>\r\n            <span>系统设置</span>\r\n          </el-menu-item>\r\n        </el-menu>\r\n      </el-aside>\r\n      \r\n      <!-- 主内容区 -->\r\n      <el-container>\r\n        <!-- 顶部导航 -->\r\n        <el-header class=\"header\">\r\n          <div class=\"header-left\">\r\n            <el-button\r\n              type=\"text\"\r\n              :icon=\"isCollapse ? 'Expand' : 'Fold'\"\r\n              @click=\"toggleSidebar\"\r\n              class=\"toggle-button\"\r\n            />\r\n            <el-breadcrumb separator=\"/\">\r\n              <el-breadcrumb-item :to=\"{ path: '/admin' }\">控制台</el-breadcrumb-item>\r\n              <el-breadcrumb-item>生产监控</el-breadcrumb-item>\r\n            </el-breadcrumb>\r\n          </div>\r\n          \r\n          <div class=\"header-right\">\r\n            <el-badge :value=\"activeAlertsCount\" class=\"notification-badge\" v-if=\"activeAlertsCount\">\r\n              <el-button type=\"text\" :icon=\"Bell\" @click=\"showAlerts\" />\r\n            </el-badge>\r\n            \r\n            <el-dropdown trigger=\"click\" @command=\"handleCommand\">\r\n              <div class=\"user-dropdown\">\r\n                <el-avatar :size=\"32\" :src=\"userAvatar\">{{ userInitials }}</el-avatar>\r\n                <span class=\"username\">{{ userName }}</span>\r\n                <el-icon><ArrowDown /></el-icon>\r\n              </div>\r\n              \r\n              <template #dropdown>\r\n                <el-dropdown-menu>\r\n                  <el-dropdown-item command=\"profile\">个人信息</el-dropdown-item>\r\n                  <el-dropdown-item command=\"settings\">账号设置</el-dropdown-item>\r\n                  <el-dropdown-item divided command=\"logout\">退出登录</el-dropdown-item>\r\n                </el-dropdown-menu>\r\n              </template>\r\n            </el-dropdown>\r\n          </div>\r\n        </el-header>\r\n        \r\n        <!-- 主内容 -->\r\n        <el-main class=\"main-content\">\r\n          <div class=\"monitoring-header\">\r\n            <h1>生产监控中心</h1>\r\n            <div class=\"monitoring-actions\">\r\n              <span class=\"last-updated\">最后更新: {{ lastUpdatedTime }}</span>\r\n              <el-button type=\"primary\" :loading=\"isRefreshing\" @click=\"refreshData\">\r\n                <el-icon><Refresh /></el-icon> 刷新数据\r\n              </el-button>\r\n            </div>\r\n          </div>\r\n          \r\n          <!-- 环境监控卡片 -->\r\n          <el-row :gutter=\"20\" class=\"monitoring-section\">\r\n            <el-col :span=\"24\">\r\n              <h2 class=\"section-title\">\r\n                <el-icon><Cloudy /></el-icon> 环境监控\r\n              </h2>\r\n            </el-col>\r\n            \r\n            <el-col :xs=\"24\" :sm=\"12\" :md=\"8\" :lg=\"6\" v-for=\"(area, index) in monitoringAreas\" :key=\"index\">\r\n              <el-card shadow=\"hover\" class=\"env-card\" :body-style=\"{ padding: '0' }\">\r\n                <div class=\"env-card-header\">\r\n                  <h3>{{ area.name }}</h3>\r\n                  <el-tag :type=\"getAreaStatusType(area.status)\">{{ area.status }}</el-tag>\r\n                </div>\r\n                \r\n                <div class=\"env-card-body\">\r\n                  <div class=\"env-param\">\r\n                    <div class=\"param-icon\">\r\n                      <el-icon :color=\"getParamColor(area.temperature.value, 'temperature')\"><Sunny /></el-icon>\r\n                    </div>\r\n                    <div class=\"param-info\">\r\n                      <div class=\"param-label\">温度</div>\r\n                      <div class=\"param-value\" :class=\"getParamClass(area.temperature.value, 'temperature')\">\r\n                        {{ area.temperature.value }}°C\r\n                      </div>\r\n                    </div>\r\n                    <div class=\"param-trend\">\r\n                      <el-icon v-if=\"area.temperature.trend > 0\"><ArrowUp /></el-icon>\r\n                      <el-icon v-else-if=\"area.temperature.trend < 0\"><ArrowDown /></el-icon>\r\n                      <el-icon v-else><DArrowRight /></el-icon>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div class=\"env-param\">\r\n                    <div class=\"param-icon\">\r\n                      <el-icon :color=\"getParamColor(area.humidity.value, 'humidity')\"><Umbrella /></el-icon>\r\n                    </div>\r\n                    <div class=\"param-info\">\r\n                      <div class=\"param-label\">湿度</div>\r\n                      <div class=\"param-value\" :class=\"getParamClass(area.humidity.value, 'humidity')\">\r\n                        {{ area.humidity.value }}%\r\n                      </div>\r\n                    </div>\r\n                    <div class=\"param-trend\">\r\n                      <el-icon v-if=\"area.humidity.trend > 0\"><ArrowUp /></el-icon>\r\n                      <el-icon v-else-if=\"area.humidity.trend < 0\"><ArrowDown /></el-icon>\r\n                      <el-icon v-else><DArrowRight /></el-icon>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div class=\"env-param\">\r\n                    <div class=\"param-icon\">\r\n                      <el-icon :color=\"getParamColor(area.ammonia.value, 'ammonia')\"><Aim /></el-icon>\r\n                    </div>\r\n                    <div class=\"param-info\">\r\n                      <div class=\"param-label\">氨气</div>\r\n                      <div class=\"param-value\" :class=\"getParamClass(area.ammonia.value, 'ammonia')\">\r\n                        {{ area.ammonia.value }} ppm\r\n                      </div>\r\n                    </div>\r\n                    <div class=\"param-trend\">\r\n                      <el-icon v-if=\"area.ammonia.trend > 0\"><ArrowUp /></el-icon>\r\n                      <el-icon v-else-if=\"area.ammonia.trend < 0\"><ArrowDown /></el-icon>\r\n                      <el-icon v-else><DArrowRight /></el-icon>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div class=\"env-card-footer\">\r\n                  <el-button type=\"text\" @click=\"viewAreaDetails(area)\">查看详情</el-button>\r\n                  <el-button type=\"text\" @click=\"viewAreaHistory(area)\">历史数据</el-button>\r\n                </div>\r\n              </el-card>\r\n            </el-col>\r\n          </el-row>\r\n          \r\n          <!-- 猪群监控 -->\r\n          <el-row :gutter=\"20\" class=\"monitoring-section\">\r\n            <el-col :span=\"24\">\r\n              <h2 class=\"section-title\">\r\n                <el-icon><Pig /></el-icon> 猪群监控\r\n              </h2>\r\n            </el-col>\r\n            \r\n            <el-col :xs=\"24\" :lg=\"12\">\r\n              <el-card shadow=\"hover\" class=\"chart-card\">\r\n                <template #header>\r\n                  <div class=\"chart-header\">\r\n                    <h3>猪群分布</h3>\r\n                    <el-select v-model=\"pigDataType\" size=\"small\" @change=\"updatePigChart\">\r\n                      <el-option label=\"按体重分布\" value=\"weight\" />\r\n                      <el-option label=\"按年龄分布\" value=\"age\" />\r\n                      <el-option label=\"按健康状态\" value=\"health\" />\r\n                    </el-select>\r\n                  </div>\r\n                </template>\r\n                <div class=\"chart-container\" ref=\"pigDistributionChart\"></div>\r\n              </el-card>\r\n            </el-col>\r\n            \r\n            <el-col :xs=\"24\" :lg=\"12\">\r\n              <el-card shadow=\"hover\" class=\"pig-status-card\">\r\n                <template #header>\r\n                  <div class=\"card-header\">\r\n                    <h3>猪群状态概览</h3>\r\n                  </div>\r\n                </template>\r\n                <div class=\"pig-status-content\">\r\n                  <div class=\"status-item\">\r\n                    <div class=\"status-label\">总存栏数</div>\r\n                    <div class=\"status-value\">{{ pigStatus.totalCount }}</div>\r\n                    <div class=\"status-trend\" :class=\"{ 'up': pigStatus.countTrend > 0, 'down': pigStatus.countTrend < 0 }\">\r\n                      <el-icon v-if=\"pigStatus.countTrend > 0\"><ArrowUp /></el-icon>\r\n                      <el-icon v-else-if=\"pigStatus.countTrend < 0\"><ArrowDown /></el-icon>\r\n                      {{ Math.abs(pigStatus.countTrend) }}%\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div class=\"status-item\">\r\n                    <div class=\"status-label\">平均体重</div>\r\n                    <div class=\"status-value\">{{ pigStatus.avgWeight }} kg</div>\r\n                    <div class=\"status-trend\" :class=\"{ 'up': pigStatus.weightTrend > 0, 'down': pigStatus.weightTrend < 0 }\">\r\n                      <el-icon v-if=\"pigStatus.weightTrend > 0\"><ArrowUp /></el-icon>\r\n                      <el-icon v-else-if=\"pigStatus.weightTrend < 0\"><ArrowDown /></el-icon>\r\n                      {{ Math.abs(pigStatus.weightTrend) }}%\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div class=\"status-item\">\r\n                    <div class=\"status-label\">日均增重</div>\r\n                    <div class=\"status-value\">{{ pigStatus.dailyGain }} kg</div>\r\n                    <div class=\"status-trend\" :class=\"{ 'up': pigStatus.gainTrend > 0, 'down': pigStatus.gainTrend < 0 }\">\r\n                      <el-icon v-if=\"pigStatus.gainTrend > 0\"><ArrowUp /></el-icon>\r\n                      <el-icon v-else-if=\"pigStatus.gainTrend < 0\"><ArrowDown /></el-icon>\r\n                      {{ Math.abs(pigStatus.gainTrend) }}%\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div class=\"status-item\">\r\n                    <div class=\"status-label\">健康率</div>\r\n                    <div class=\"status-value\">{{ pigStatus.healthRate }}%</div>\r\n                    <div class=\"status-trend\" :class=\"{ 'up': pigStatus.healthTrend > 0, 'down': pigStatus.healthTrend < 0 }\">\r\n                      <el-icon v-if=\"pigStatus.healthTrend > 0\"><ArrowUp /></el-icon>\r\n                      <el-icon v-else-if=\"pigStatus.healthTrend < 0\"><ArrowDown /></el-icon>\r\n                      {{ Math.abs(pigStatus.healthTrend) }}%\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <el-divider />\r\n                \r\n                <div class=\"pig-actions\">\r\n                  <el-button type=\"primary\" @click=\"viewPigDetails\">查看详细数据</el-button>\r\n                  <el-button @click=\"exportPigData\">导出数据</el-button>\r\n                </div>\r\n              </el-card>\r\n            </el-col>\r\n          </el-row>\r\n          \r\n          <!-- 饲喂监控 -->\r\n          <el-row :gutter=\"20\" class=\"monitoring-section\">\r\n            <el-col :span=\"24\">\r\n              <h2 class=\"section-title\">\r\n                <el-icon><Food /></el-icon> 饲喂监控\r\n              </h2>\r\n            </el-col>\r\n            \r\n            <el-col :xs=\"24\" :lg=\"12\">\r\n              <el-card shadow=\"hover\" class=\"chart-card\">\r\n                <template #header>\r\n                  <div class=\"chart-header\">\r\n                    <h3>饲料消耗趋势</h3>\r\n                    <el-radio-group v-model=\"feedTimeRange\" size=\"small\" @change=\"updateFeedChart\">\r\n                      <el-radio-button label=\"week\">本周</el-radio-button>\r\n                      <el-radio-button label=\"month\">本月</el-radio-button>\r\n                      <el-radio-button label=\"quarter\">本季度</el-radio-button>\r\n                    </el-radio-group>\r\n                  </div>\r\n                </template>\r\n                <div class=\"chart-container\" ref=\"feedConsumptionChart\"></div>\r\n              </el-card>\r\n            </el-col>\r\n            \r\n            <el-col :xs=\"24\" :lg=\"12\">\r\n              <el-card shadow=\"hover\" class=\"feed-status-card\">\r\n                <template #header>\r\n                  <div class=\"card-header\">\r\n                    <h3>饲料库存状态</h3>\r\n                  </div>\r\n                </template>\r\n                <div class=\"feed-status-content\">\r\n                  <div v-for=\"(feed, index) in feedStocks\" :key=\"index\" class=\"feed-item\">\r\n                    <div class=\"feed-info\">\r\n                      <div class=\"feed-name\">{{ feed.name }}</div>\r\n                      <div class=\"feed-stock-info\">\r\n                        <span>库存: {{ feed.current }}kg / {{ feed.capacity }}kg</span>\r\n                        <span :class=\"getFeedStockClass(feed)\">\r\n                          ({{ Math.round(feed.current / feed.capacity * 100) }}%)\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                    \r\n                    <el-progress\r\n                      :percentage=\"Math.round(feed.current / feed.capacity * 100)\"\r\n                      :status=\"getFeedStockStatus(feed)\"\r\n                      :stroke-width=\"15\"\r\n                    />\r\n                    \r\n                    <div class=\"feed-actions\">\r\n                      <span class=\"feed-estimate\">预计可用: {{ feed.estimatedDays }}天</span>\r\n                      <el-button\r\n                        v-if=\"feed.current / feed.capacity < 0.2\"\r\n                        type=\"warning\"\r\n                        size=\"small\"\r\n                        @click=\"orderFeed(feed)\"\r\n                      >\r\n                        补充库存\r\n                      </el-button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </el-card>\r\n            </el-col>\r\n          </el-row>\r\n          \r\n          <!-- 视频监控 -->\r\n          <el-row :gutter=\"20\" class=\"monitoring-section\">\r\n            <el-col :span=\"24\">\r\n              <h2 class=\"section-title\">\r\n                <el-icon><VideoCamera /></el-icon> 视频监控\r\n              </h2>\r\n            </el-col>\r\n            \r\n            <el-col :xs=\"24\" :sm=\"12\" :lg=\"8\" v-for=\"(camera, index) in cameraStreams\" :key=\"index\">\r\n              <el-card shadow=\"hover\" class=\"camera-card\">\r\n                <div class=\"camera-header\">\r\n                  <h3>{{ camera.name }}</h3>\r\n                  <el-tag :type=\"camera.status === 'online' ? 'success' : 'danger'\">\r\n                    {{ camera.status === 'online' ? '在线' : '离线' }}\r\n                  </el-tag>\r\n                </div>\r\n                \r\n                <div class=\"camera-stream\" v-if=\"camera.status === 'online'\">\r\n                  <img :src=\"camera.streamUrl\" alt=\"摄像头画面\" />\r\n                </div>\r\n                <div class=\"camera-offline\" v-else>\r\n                  <el-icon :size=\"48\"><VideoPlay /></el-icon>\r\n                  <p>摄像头离线</p>\r\n                </div>\r\n                \r\n                <div class=\"camera-actions\">\r\n                  <el-button-group>\r\n                    <el-button type=\"primary\" :disabled=\"camera.status !== 'online'\" @click=\"viewFullscreen(camera)\">\r\n                      <el-icon><FullScreen /></el-icon>\r\n                    </el-button>\r\n                    <el-button type=\"primary\" :disabled=\"camera.status !== 'online'\" @click=\"viewRecordings(camera)\">\r\n                      <el-icon><VideoPlay /></el-icon>\r\n                    </el-button>\r\n                    <el-button type=\"primary\" @click=\"cameraSettings(camera)\">\r\n                      <el-icon><Setting /></el-icon>\r\n                    </el-button>\r\n                  </el-button-group>\r\n                </div>\r\n              </el-card>\r\n            </el-col>\r\n          </el-row>\r\n          \r\n          <!-- 告警信息 -->\r\n          <el-row :gutter=\"20\" class=\"monitoring-section\">\r\n            <el-col :span=\"24\">\r\n              <h2 class=\"section-title\">\r\n                <el-icon><Warning /></el-icon> 告警信息\r\n                <el-badge :value=\"activeAlertsCount\" class=\"alert-badge\" v-if=\"activeAlertsCount\" />\r\n              </h2>\r\n            </el-col>\r\n            \r\n            <el-col :span=\"24\">\r\n              <el-card shadow=\"hover\" class=\"alerts-card\">\r\n                <template #header>\r\n                  <div class=\"card-header\">\r\n                    <div class=\"alert-tabs\">\r\n                      <el-radio-group v-model=\"alertsTab\" size=\"small\">\r\n                        <el-radio-button label=\"active\">活跃告警 ({{ activeAlertsCount }})</el-radio-button>\r\n                        <el-radio-button label=\"history\">历史告警</el-radio-button>\r\n                      </el-radio-group>\r\n                    </div>\r\n                    \r\n                    <div class=\"alert-actions\">\r\n                      <el-button\r\n                        v-if=\"alertsTab === 'active' && activeAlertsCount > 0\"\r\n                        type=\"warning\"\r\n                        size=\"small\"\r\n                        @click=\"acknowledgeAllAlerts\"\r\n                      >\r\n                        全部确认\r\n                      </el-button>\r\n                      <el-button type=\"primary\" size=\"small\" @click=\"exportAlerts\">\r\n                        导出\r\n                      </el-button>\r\n                    </div>\r\n                  </div>\r\n                </template>\r\n                \r\n                <el-table\r\n                  :data=\"alertsTab === 'active' ? activeAlerts : historyAlerts\"\r\n                  style=\"width: 100%\"\r\n                  :max-height=\"400\"\r\n                  v-loading=\"alertsLoading\"\r\n                >\r\n                  <el-table-column prop=\"time\" label=\"时间\" width=\"180\" sortable />\r\n                  <el-table-column prop=\"area\" label=\"区域\" width=\"150\" />\r\n                  <el-table-column prop=\"type\" label=\"类型\" width=\"120\">\r\n                    <template #default=\"scope\">\r\n                      <el-tag :type=\"getAlertTypeTag(scope.row.type)\">\r\n                        {{ scope.row.type }}\r\n                      </el-tag>\r\n                    </template>\r\n                  </el-table-column>\r\n                  <el-table-column prop=\"level\" label=\"级别\" width=\"100\">\r\n                    <template #default=\"scope\">\r\n                      <el-tag :type=\"getAlertLevelTag(scope.row.level)\">\r\n                        {{ scope.row.level }}\r\n                      </el-tag>\r\n                    </template>\r\n                  </el-table-column>\r\n                  <el-table-column prop=\"message\" label=\"内容\" />\r\n                  <el-table-column label=\"操作\" width=\"180\" fixed=\"right\">\r\n                    <template #default=\"scope\">\r\n                      <el-button\r\n                        v-if=\"alertsTab === 'active'\"\r\n                        type=\"primary\"\r\n                        size=\"small\"\r\n                        @click=\"acknowledgeAlert(scope.row)\"\r\n                      >\r\n                        确认\r\n                      </el-button>\r\n                      <el-button\r\n                        type=\"info\"\r\n                        size=\"small\"\r\n                        @click=\"viewAlertDetails(scope.row)\"\r\n                      >\r\n                        详情\r\n                      </el-button>\r\n                    </template>\r\n                  </el-table-column>\r\n                </el-table>\r\n                \r\n                <div class=\"pagination-container\">\r\n                  <el-pagination\r\n                    v-model:current-page=\"alertsPage\"\r\n                    v-model:page-size=\"alertsPageSize\"\r\n                    :page-sizes=\"[10, 20, 50, 100]\"\r\n                    layout=\"total, sizes, prev, pager, next, jumper\"\r\n                    :total=\"alertsTab === 'active' ? totalActiveAlerts : totalHistoryAlerts\"\r\n                    @size-change=\"handleAlertsPageSizeChange\"\r\n                    @current-change=\"handleAlertsPageChange\"\r\n                  />\r\n                </div>\r\n              </el-card>\r\n            </el-col>\r\n          </el-row>\r\n        </el-main>\r\n      </el-container>\r\n    </el-container>\r\n    \r\n    <!-- 告警详情对话框 -->\r\n    <el-dialog\r\n      v-model=\"alertDialogVisible\"\r\n      title=\"告警详情\"\r\n      width=\"600px\"\r\n      destroy-on-close\r\n    >\r\n      <div v-if=\"selectedAlert\" class=\"alert-detail\">\r\n        <div class=\"alert-detail-item\">\r\n          <span class=\"detail-label\">告警ID:</span>\r\n          <span class=\"detail-value\">{{ selectedAlert.id }}</span>\r\n        </div>\r\n        <div class=\"alert-detail-item\">\r\n          <span class=\"detail-label\">时间:</span>\r\n          <span class=\"detail-value\">{{ selectedAlert.time }}</span>\r\n        </div>\r\n        <div class=\"alert-detail-item\">\r\n          <span class=\"detail-label\">区域:</span>\r\n          <span class=\"detail-value\">{{ selectedAlert.area }}</span>\r\n        </div>\r\n        <div class=\"alert-detail-item\">\r\n          <span class=\"detail-label\">类型:</span>\r\n          <span class=\"detail-value\">\r\n            <el-tag :type=\"getAlertTypeTag(selectedAlert.type)\">\r\n              {{ selectedAlert.type }}\r\n            </el-tag>\r\n          </span>\r\n        </div>\r\n        <div class=\"alert-detail-item\">\r\n          <span class=\"detail-label\">级别:</span>\r\n          <span class=\"detail-value\">\r\n            <el-tag :type=\"getAlertLevelTag(selectedAlert.level)\">\r\n              {{ selectedAlert.level }}\r\n            </el-tag>\r\n          </span>\r\n        </div>\r\n        <div class=\"alert-detail-item\">\r\n          <span class=\"detail-label\">内容:</span>\r\n          <span class=\"detail-value\">{{ selectedAlert.message }}</span>\r\n        </div>\r\n        <div class=\"alert-detail-item\">\r\n          <span class=\"detail-label\">详细描述:</span>\r\n          <span class=\"detail-value\">{{ selectedAlert.description }}</span>\r\n        </div>\r\n        <div class=\"alert-detail-item\" v-if=\"selectedAlert.parameters\">\r\n          <span class=\"detail-label\">相关参数:</span>\r\n          <div class=\"detail-value parameters-list\">\r\n            <div v-for=\"(value, key) in selectedAlert.parameters\" :key=\"key\" class=\"parameter-item\">\r\n              <span class=\"parameter-name\">{{ key }}:</span>\r\n              <span class=\"parameter-value\">{{ value }}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"alert-detail-item\" v-if=\"alertsTab === 'history' && selectedAlert.resolvedBy\">\r\n          <span class=\"detail-label\">处理人:</span>\r\n          <span class=\"detail-value\">{{ selectedAlert.resolvedBy }}</span>\r\n        </div>\r\n        <div class=\"alert-detail-item\" v-if=\"alertsTab === 'history' && selectedAlert.resolvedTime\">\r\n          <span class=\"detail-label\">处理时间:</span>\r\n          <span class=\"detail-value\">{{ selectedAlert.resolvedTime }}</span>\r\n        </div>\r\n        <div class=\"alert-detail-item\" v-if=\"alertsTab === 'history' && selectedAlert.resolution\">\r\n          <span class=\"detail-label\">处理方式:</span>\r\n          <span class=\"detail-value\">{{ selectedAlert.resolution }}</span>\r\n        </div>\r\n      </div>\r\n      \r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"alertDialogVisible = false\">关闭</el-button>\r\n          <el-button\r\n            v-if=\"alertsTab === 'active' && selectedAlert\"\r\n            type=\"primary\"\r\n            @click=\"acknowledgeAlertFromDialog\"\r\n          >\r\n            确认告警\r\n          </el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, reactive, computed, onMounted, nextTick, onBeforeUnmount } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { useAuthStore } from '@/store/auth'\r\nimport { useMonitoringStore } from '@/store/monitoring'\r\nimport { ElMessage, ElMessageBox } from 'element-plus'\r\nimport * as echarts from 'echarts'\r\n\r\nexport default {\r\n  name: 'MonitoringSystemPage',\r\n  \r\n  setup() {\r\n    const router = useRouter()\r\n    const authStore = useAuthStore()\r\n    const monitoringStore = useMonitoringStore()\r\n    \r\n    // 侧边栏状态\r\n    const isCollapse = ref(false)\r\n    const activeMenu = ref('/admin/monitoring')\r\n    \r\n    // 用户信息\r\n    const userName = computed(() => authStore.user?.name || '用户')\r\n    const userAvatar = computed(() => authStore.user?.avatar || '')\r\n    const userInitials = computed(() => {\r\n      const name = authStore.user?.name || ''\r\n      return name.substring(0, 1).toUpperCase()\r\n    })\r\n    const isAdmin = computed(() => authStore.isAdmin)\r\n    \r\n    // 数据刷新状态\r\n    const isRefreshing = ref(false)\r\n    const lastUpdatedTime = ref(formatDateTime(new Date()))\r\n    \r\n    // 图表引用\r\n    const pigDistributionChart = ref(null)\r\n    const feedConsumptionChart = ref(null)\r\n    let pigChart = null\r\n    let feedChart = null\r\n    \r\n    // 猪群数据类型\r\n    const pigDataType = ref('weight')\r\n    \r\n    // 饲料时间范围\r\n    const feedTimeRange = ref('week')\r\n    \r\n    // 告警相关\r\n    const alertsTab = ref('active')\r\n    const alertsLoading = ref(false)\r\n    const alertsPage = ref(1)\r\n    const alertsPageSize = ref(10)\r\n    const totalActiveAlerts = ref(0)\r\n    const totalHistoryAlerts = ref(0)\r\n    const alertDialogVisible = ref(false)\r\n    const selectedAlert = ref(null)\r\n    \r\n    // 活跃告警数量\r\n    const activeAlertsCount = computed(() => activeAlerts.value.length)\r\n    \r\n    // 监控区域数据\r\n    const monitoringAreas = ref([\r\n      {\r\n        id: 1,\r\n        name: '1号猪舍',\r\n        status: '正常',\r\n        temperature: { value: 25.6, trend: 0.5 },\r\n        humidity: { value: 65, trend: -2 },\r\n        ammonia: { value: 5, trend: 0 }\r\n      },\r\n      {\r\n        id: 2,\r\n        name: '2号猪舍',\r\n        status: '正常',\r\n        temperature: { value: 26.2, trend: 1.2 },\r\n        humidity: { value: 62, trend: -1 },\r\n        ammonia: { value: 6, trend: 0.5 }\r\n      },\r\n      {\r\n        id: 3,\r\n        name: '3号猪舍',\r\n        status: '警告',\r\n        temperature: { value: 29.8, trend: 3.5 },\r\n        humidity: { value: 58, trend: -5 },\r\n        ammonia: { value: 8, trend: 2 }\r\n      },\r\n      {\r\n        id: 4,\r\n        name: '4号猪舍',\r\n        status: '正常',\r\n        temperature: { value: 24.9, trend: -0.3 },\r\n        humidity: { value: 68, trend: 2 },\r\n        ammonia: { value: 4, trend: -1 }\r\n      }\r\n    ])\r\n    \r\n    // 猪群状态数据\r\n    const pigStatus = reactive({\r\n      totalCount: 1256,\r\n      countTrend: 2.5,\r\n      avgWeight: 78.3,\r\n      weightTrend: 1.8,\r\n      dailyGain: 0.85,\r\n      gainTrend: 3.2,\r\n      healthRate: 91.5,\r\n      healthTrend: -0.5\r\n    })\r\n    \r\n    // 饲料库存数据\r\n    const feedStocks = ref([\r\n      {\r\n        id: 1,\r\n        name: '标准饲料A',\r\n        current: 2800,\r\n        capacity: 5000,\r\n        estimatedDays: 14\r\n      },\r\n      {\r\n        id: 2,\r\n        name: '生长促进饲料B',\r\n        current: 1200,\r\n        capacity: 3000,\r\n        estimatedDays: 8\r\n      },\r\n      {\r\n        id: 3,\r\n        name: '营养强化饲料C',\r\n        current: 450,\r\n        capacity: 2000,\r\n        estimatedDays: 4\r\n      }\r\n    ])\r\n    \r\n    // 摄像头数据\r\n    const cameraStreams = ref([\r\n      {\r\n        id: 1,\r\n        name: '1号猪舍-入口',\r\n        status: 'online',\r\n        streamUrl: 'https://example.com/stream1.jpg'\r\n      },\r\n      {\r\n        id: 2,\r\n        name: '1号猪舍-中部',\r\n        status: 'online',\r\n        streamUrl: 'https://example.com/stream2.jpg'\r\n      },\r\n      {\r\n        id: 3,\r\n        name: '2号猪舍-入口',\r\n        status: 'online',\r\n        streamUrl: 'https://example.com/stream3.jpg'\r\n      },\r\n      {\r\n        id: 4,\r\n        name: '3号猪舍-中部',\r\n        status: 'offline',\r\n        streamUrl: ''\r\n      },\r\n      {\r\n        id: 5,\r\n        name: '4号猪舍-入口',\r\n        status: 'online',\r\n        streamUrl: 'https://example.com/stream5.jpg'\r\n      }\r\n    ])\r\n    \r\n    // 告警数据\r\n    const activeAlerts = ref([\r\n      {\r\n        id: 1,\r\n        time: '2025-03-15 08:23:45',\r\n        area: '3号猪舍',\r\n        type: '温度异常',\r\n        level: '警告',\r\n        message: '温度过高 (29.8°C)',\r\n        description: '3号猪舍温度持续30分钟超过29°C，已超过预设阈值(28°C)。',\r\n        parameters: {\r\n          '当前温度': '29.8°C',\r\n          '阈值': '28°C',\r\n          '持续时间': '30分钟'\r\n        }\r\n      },\r\n      {\r\n        id: 2,\r\n        time: '2025-03-15 07:45:12',\r\n        area: '2号猪舍',\r\n        type: '设备异常',\r\n        level: '一般',\r\n        message: '饲喂机#2运行异常',\r\n        description: '饲喂机#2运行时出现异常噪音，可能需要维护检查。',\r\n        parameters: {\r\n          '设备ID': 'FEEDER-002',\r\n          '异常类型': '噪音异常',\r\n          '上次维护': '2025-02-28'\r\n        }\r\n      },\r\n      {\r\n        id: 3,\r\n        time: '2025-03-15 06:12:33',\r\n        area: '全场',\r\n        type: '系统警告',\r\n        level: '一般',\r\n        message: '数据备份延迟',\r\n        description: '系统数据备份已延迟超过12小时，请检查备份服务状态。',\r\n        parameters: {\r\n          '上次备份': '2025-03-14 18:00:05',\r\n          '延迟时间': '12小时12分钟',\r\n          '影响服务': '历史数据查询'\r\n        }\r\n      }\r\n    ])\r\n    \r\n    const historyAlerts = ref([\r\n      {\r\n        id: 101,\r\n        time: '2025-03-14 14:23:45',\r\n        area: '1号猪舍',\r\n        type: '湿度异常',\r\n        level: '警告',\r\n        message: '湿度过低 (45%)',\r\n        description: '1号猪舍湿度持续45分钟低于50%，已低于预设阈值(50%)。',\r\n        parameters: {\r\n          '当前湿度': '45%',\r\n          '阈值': '50%',\r\n          '持续时间': '45分钟'\r\n        },\r\n        resolvedBy: '张工程师',\r\n        resolvedTime: '2025-03-14 15:10:22',\r\n        resolution: '已调整通风系统，湿度恢复正常'\r\n      },\r\n      {\r\n        id: 102,\r\n        time: '2025-03-14 10:15:33',\r\n        area: '4号猪舍',\r\n        type: '氨气异常',\r\n        level: '严重',\r\n        message: '氨气浓度过高 (15ppm)',\r\n        description: '4号猪舍氨气浓度达到15ppm，已超过危险阈值(10ppm)。',\r\n        parameters: {\r\n          '当前浓度': '15ppm',\r\n          '阈值': '10ppm',\r\n          '持续时间': '15分钟'\r\n        },\r\n        resolvedBy: '李主管',\r\n        resolvedTime: '2025-03-14 11:05:18',\r\n        resolution: '已增强通风并清理粪污，浓度已降至安全水平'\r\n      }\r\n    ])\r\n    \r\n    // 方法\r\n    const toggleSidebar = () => {\r\n      isCollapse.value = !isCollapse.value\r\n    }\r\n    \r\n    const handleCommand = (command) => {\r\n      if (command === 'logout') {\r\n        ElMessageBox.confirm('确定要退出登录吗?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          authStore.logout()\r\n          router.push('/')\r\n          ElMessage.success('已成功退出登录')\r\n        }).catch(() => {})\r\n      } else if (command === 'profile') {\r\n        router.push('/admin/profile')\r\n      } else if (command === 'settings') {\r\n        router.push('/admin/settings')\r\n      }\r\n    }\r\n    \r\n    const refreshData = async () => {\r\n      try {\r\n        isRefreshing.value = true\r\n        await monitoringStore.fetchAllMonitoringData()\r\n        lastUpdatedTime.value = formatDateTime(new Date())\r\n        ElMessage.success('数据已刷新')\r\n      } catch (error) {\r\n        console.error('刷新数据错误:', error)\r\n        ElMessage.error('刷新数据失败，请稍后再试')\r\n      } finally {\r\n        isRefreshing.value = false\r\n      }\r\n    }\r\n    \r\n    // 格式化日期时间\r\n    function formatDateTime(date) {\r\n      return date.toLocaleString('zh-CN', {\r\n        year: 'numeric',\r\n        month: '2-digit',\r\n        day: '2-digit',\r\n        hour: '2-digit',\r\n        minute: '2-digit',\r\n        second: '2-digit',\r\n        hour12: false\r\n      })\r\n    }\r\n    \r\n    // 环境参数相关方法\r\n    const getAreaStatusType = (status) => {\r\n      const statusMap = {\r\n        '正常': 'success',\r\n        '警告': 'warning',\r\n        '异常': 'danger'\r\n      }\r\n      return statusMap[status] || 'info'\r\n    }\r\n    \r\n    const getParamColor = (value, type) => {\r\n      if (type === 'temperature') {\r\n        if (value > 28) return '#F56C6C'\r\n        if (value < 20) return '#409EFF'\r\n        return '#67C23A'\r\n      } else if (type === 'humidity') {\r\n        if (value > 80) return '#F56C6C'\r\n        if (value < 50) return '#E6A23C'\r\n        return '#67C23A'\r\n      } else if (type === 'ammonia') {\r\n        if (value > 10) return '#F56C6C'\r\n        if (value > 7) return '#E6A23C'\r\n        return '#67C23A'\r\n      }\r\n      return '#909399'\r\n    }\r\n    \r\n    const getParamClass = (value, type) => {\r\n      if (type === 'temperature') {\r\n        if (value > 28) return 'param-danger'\r\n        if (value < 20) return 'param-warning'\r\n        return 'param-normal'\r\n      } else if (type === 'humidity') {\r\n        if (value > 80) return 'param-danger'\r\n        if (value < 50) return 'param-warning'\r\n        return 'param-normal'\r\n      } else if (type === 'ammonia') {\r\n        if (value > 10) return 'param-danger'\r\n        if (value > 7) return 'param-warning'\r\n        return 'param-normal'\r\n      }\r\n      return 'param-normal'\r\n    }\r\n    \r\n    const viewAreaDetails = (area) => {\r\n      router.push(`/admin/monitoring/area/${area.id}`)\r\n    }\r\n    \r\n    const viewAreaHistory = (area) => {\r\n      router.push(`/admin/monitoring/area/${area.id}/history`)\r\n    }\r\n    \r\n    // 猪群相关方法\r\n    const viewPigDetails = () => {\r\n      router.push('/admin/monitoring/pigs')\r\n    }\r\n    \r\n    const exportPigData = () => {\r\n      ElMessage.success('猪群数据导出功能开发中')\r\n    }\r\n    \r\n    // 饲料相关方法\r\n    const getFeedStockClass = (feed) => {\r\n      const percentage = feed.current / feed.capacity * 100\r\n      if (percentage < 20) return 'stock-danger'\r\n      if (percentage < 40) return 'stock-warning'\r\n      return 'stock-normal'\r\n    }\r\n    \r\n    const getFeedStockStatus = (feed) => {\r\n      const percentage = feed.current / feed.capacity * 100\r\n      if (percentage < 20) return 'exception'\r\n      if (percentage < 40) return 'warning'\r\n      return 'success'\r\n    }\r\n    \r\n    const orderFeed = (feed) => {\r\n      ElMessageBox.confirm(`确定要为\"${feed.name}\"补充库存吗?`, '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'info'\r\n      }).then(() => {\r\n        ElMessage.success(`已创建\"${feed.name}\"的补充库存订单`)\r\n      }).catch(() => {})\r\n    }\r\n    \r\n    // 摄像头相关方法\r\n    const viewFullscreen = (camera) => {\r\n      ElMessage.info(`全屏查看${camera.name}功能开发中`)\r\n    }\r\n    \r\n    const viewRecordings = (camera) => {\r\n      router.push(`/admin/monitoring/camera/${camera.id}/recordings`)\r\n    }\r\n    \r\n    const cameraSettings = (camera) => {\r\n      router.push(`/admin/monitoring/camera/${camera.id}/settings`)\r\n    }\r\n    \r\n    // 告警相关方法\r\n    const getAlertTypeTag = (type) => {\r\n      const typeMap = {\r\n        '温度异常': 'danger',\r\n        '湿度异常': 'warning',\r\n        '氨气异常': 'danger',\r\n        '设备异常': 'info',\r\n        '系统警告': 'warning'\r\n      }\r\n      return typeMap[type] || 'info'\r\n    }\r\n    \r\n    const getAlertLevelTag = (level) => {\r\n      const levelMap = {\r\n        '严重': 'danger',\r\n        '警告': 'warning',\r\n        '一般': 'info'\r\n      }\r\n      return levelMap[level] || 'info'\r\n    }\r\n    \r\n    const showAlerts = () => {\r\n      alertsTab.value = 'active'\r\n      window.scrollTo({\r\n        top: document.querySelector('.alerts-card').offsetTop - 80,\r\n        behavior: 'smooth'\r\n      })\r\n    }\r\n    \r\n    const acknowledgeAlert = async (alert) => {\r\n      try {\r\n        await monitoringStore.acknowledgeAlert(alert.id)\r\n        ElMessage.success(`已确认告警: ${alert.message}`)\r\n        // 在实际应用中，这里应该重新获取告警列表\r\n        activeAlerts.value = activeAlerts.value.filter(a => a.id !== alert.id)\r\n      } catch (error) {\r\n        ElMessage.error('确认告警失败，请稍后再试')\r\n      }\r\n    }\r\n    \r\n    const acknowledgeAllAlerts = async () => {\r\n      ElMessageBox.confirm('确定要确认所有活跃告警吗?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(async () => {\r\n        try {\r\n          alertsLoading.value = true\r\n          // 在实际应用中，这里应该调用批量确认API\r\n          await new Promise(resolve => setTimeout(resolve, 1000))\r\n          activeAlerts.value = []\r\n          ElMessage.success('已确认所有告警')\r\n        } catch (error) {\r\n          ElMessage.error('确认告警失败，请稍后再试')\r\n        } finally {\r\n          alertsLoading.value = false\r\n        }\r\n      }).catch(() => {})\r\n    }\r\n    \r\n    const viewAlertDetails = (alert) => {\r\n      selectedAlert.value = alert\r\n      alertDialogVisible.value = true\r\n    }\r\n    \r\n    const acknowledgeAlertFromDialog = async () => {\r\n      if (!selectedAlert.value) return\r\n      \r\n      try {\r\n        await monitoringStore.acknowledgeAlert(selectedAlert.value.id)\r\n        ElMessage.success(`已确认告警: ${selectedAlert.value.message}`)\r\n        activeAlerts.value = activeAlerts.value.filter(a => a.id !== selectedAlert.value.id)\r\n        alertDialogVisible.value = false\r\n      } catch (error) {\r\n        ElMessage.error('确认告警失败，请稍后再试')\r\n      }\r\n    }\r\n    \r\n    const exportAlerts = () => {\r\n      ElMessage.success('告警数据导出功能开发中')\r\n    }\r\n    \r\n    const handleAlertsPageChange = (page) => {\r\n      alertsPage.value = page\r\n      // 在实际应用中，这里应该重新获取告警列表\r\n    }\r\n    \r\n    const handleAlertsPageSizeChange = (size) => {\r\n      alertsPageSize.value = size\r\n      // 在实际应用中，这里应该重新获取告警列表\r\n    }\r\n    \r\n    // 初始化图表\r\n    const initCharts = () => {\r\n      // 猪群分布图\r\n      if (pigDistributionChart.value) {\r\n        pigChart = echarts.init(pigDistributionChart.value)\r\n        updatePigChart()\r\n        \r\n        // 响应窗口大小变化\r\n        window.addEventListener('resize', () => {\r\n          pigChart.resize()\r\n        })\r\n      }\r\n      \r\n      // 饲料消耗趋势图\r\n      if (feedConsumptionChart.value) {\r\n        feedChart = echarts.init(feedConsumptionChart.value)\r\n        updateFeedChart()\r\n        \r\n        // 响应窗口大小变化\r\n        window.addEventListener('resize', () => {\r\n          feedChart.resize()\r\n        })\r\n      }\r\n    }\r\n    \r\n    // 更新猪群分布图\r\n    const updatePigChart = () => {\r\n      if (!pigChart) return\r\n      \r\n      let option = {}\r\n      \r\n      if (pigDataType.value === 'weight') {\r\n        option = {\r\n          title: {\r\n            text: '猪群体重分布',\r\n            left: 'center'\r\n          },\r\n          tooltip: {\r\n            trigger: 'item',\r\n            formatter: '{a} <br/>{b}: {c} ({d}%)'\r\n          },\r\n          legend: {\r\n            orient: 'vertical',\r\n            left: 10,\r\n            data: ['<50kg', '50-80kg', '80-100kg', '100-120kg', '>120kg']\r\n          },\r\n          series: [\r\n            {\r\n              name: '体重分布',\r\n              type: 'pie',\r\n              radius: ['40%', '70%'],\r\n              avoidLabelOverlap: false,\r\n              itemStyle: {\r\n                borderRadius: 10,\r\n                borderColor: '#fff',\r\n                borderWidth: 2\r\n              },\r\n              label: {\r\n                show: false,\r\n                position: 'center'\r\n              },\r\n              emphasis: {\r\n                label: {\r\n                  show: true,\r\n                  fontSize: '18',\r\n                  fontWeight: 'bold'\r\n                }\r\n              },\r\n              labelLine: {\r\n                show: false\r\n              },\r\n              data: [\r\n                { value: 150, name: '<50kg' },\r\n                { value: 320, name: '50-80kg' },\r\n                { value: 480, name: '80-100kg' },\r\n                { value: 250, name: '100-120kg' },\r\n                { value: 56, name: '>120kg' }\r\n              ]\r\n            }\r\n          ]\r\n        }\r\n      } else if (pigDataType.value === 'age') {\r\n        option = {\r\n          title: {\r\n            text: '猪群年龄分布',\r\n            left: 'center'\r\n          },\r\n          tooltip: {\r\n            trigger: 'axis',\r\n            axisPointer: {\r\n              type: 'shadow'\r\n            }\r\n          },\r\n          grid: {\r\n            left: '3%',\r\n            right: '4%',\r\n            bottom: '3%',\r\n            containLabel: true\r\n          },\r\n          xAxis: {\r\n            type: 'category',\r\n            data: ['<1月', '1-2月', '2-3月', '3-4月', '4-5月', '5-6月', '>6月']\r\n          },\r\n          yAxis: {\r\n            type: 'value'\r\n          },\r\n          series: [\r\n            {\r\n              name: '数量',\r\n              type: 'bar',\r\n              data: [120, 200, 280, 350, 190, 80, 36],\r\n              itemStyle: {\r\n                color: function(params) {\r\n                  const colorList = ['#91cc75', '#5470c6', '#ee6666', '#73c0de', '#3ba272', '#fc8452', '#9a60b4']\r\n                  return colorList[params.dataIndex]\r\n                }\r\n              }\r\n            }\r\n          ]\r\n        }\r\n      } else if (pigDataType.value === 'health') {\r\n        option = {\r\n          title: {\r\n            text: '猪群健康状态',\r\n            left: 'center'\r\n          },\r\n          tooltip: {\r\n            trigger: 'item',\r\n            formatter: '{a} <br/>{b}: {c} ({d}%)'\r\n          },\r\n          legend: {\r\n            orient: 'vertical',\r\n            left: 10,\r\n            data: ['健康', '需观察', '生病', '治疗中', '隔离']\r\n          },\r\n          series: [\r\n            {\r\n              name: '健康状态',\r\n              type: 'pie',\r\n              radius: '70%',\r\n              center: ['50%', '50%'],\r\n              data: [\r\n                { value: 1150, name: '健康', itemStyle: { color: '#67C23A' } },\r\n                { value: 65, name: '需观察', itemStyle: { color: '#E6A23C' } },\r\n                { value: 15, name: '生病', itemStyle: { color: '#F56C6C' } },\r\n                { value: 18, name: '治疗中', itemStyle: { color: '#409EFF' } },\r\n                { value: 8, name: '隔离', itemStyle: { color: '#909399' } }\r\n              ],\r\n              emphasis: {\r\n                itemStyle: {\r\n                  shadowBlur: 10,\r\n                  shadowOffsetX: 0,\r\n                  shadowColor: 'rgba(0, 0, 0, 0.5)'\r\n                }\r\n              }\r\n            }\r\n          ]\r\n        }\r\n      }\r\n      \r\n      pigChart.setOption(option)\r\n    }\r\n    \r\n    // 更新饲料消耗趋势图\r\n    const updateFeedChart = () => {\r\n      if (!feedChart) return\r\n      \r\n      let xAxisData = []\r\n      let seriesData = []\r\n      \r\n      if (feedTimeRange.value === 'week') {\r\n        xAxisData = ['周一', '周二', '周三', '周四', '周五', '周六', '周日']\r\n        seriesData = [\r\n          { name: '标准饲料A', data: [120, 132, 125, 128, 130, 115, 122] },\r\n          { name: '生长促进饲料B', data: [80, 85, 82, 78, 83, 75, 80] },\r\n          { name: '营养强化饲料C', data: [40, 38, 42, 45, 40, 35, 38] }\r\n        ]\r\n      } else if (feedTimeRange.value === 'month') {\r\n        xAxisData = Array.from({ length: 30 }, (_, i) => `${i + 1}日`)\r\n        seriesData = [\r\n          {\r\n            name: '标准饲料A',\r\n            data: Array.from({ length: 30 }, () => Math.floor(Math.random() * 30 + 110))\r\n          },\r\n          {\r\n            name: '生长促进饲料B',\r\n            data: Array.from({ length: 30 }, () => Math.floor(Math.random() * 20 + 70))\r\n          },\r\n          {\r\n            name: '营养强化饲料C',\r\n            data: Array.from({ length: 30 }, () => Math.floor(Math.random() * 15 + 30))\r\n          }\r\n        ]\r\n      } else if (feedTimeRange.value === 'quarter') {\r\n        xAxisData = ['1月', '2月', '3月']\r\n        seriesData = [\r\n          { name: '标准饲料A', data: [3600, 3800, 3750] },\r\n          { name: '生长促进饲料B', data: [2400, 2500, 2450] },\r\n          { name: '营养强化饲料C', data: [1200, 1150, 1250] }\r\n        ]\r\n      }\r\n      \r\n      const option = {\r\n        title: {\r\n          text: '饲料消耗趋势',\r\n          left: 'center'\r\n        },\r\n        tooltip: {\r\n          trigger: 'axis',\r\n          axisPointer: {\r\n            type: 'cross',\r\n            label: {\r\n              backgroundColor: '#6a7985'\r\n            }\r\n          }\r\n        },\r\n        legend: {\r\n          data: ['标准饲料A', '生长促进饲料B', '营养强化饲料C'],\r\n          top: 30\r\n        },\r\n        grid: {\r\n          left: '3%',\r\n          right: '4%',\r\n          bottom: '3%',\r\n          containLabel: true\r\n        },\r\n        xAxis: {\r\n          type: 'category',\r\n          boundaryGap: false,\r\n          data: xAxisData\r\n        },\r\n        yAxis: {\r\n          type: 'value',\r\n          name: '消耗量 (kg)'\r\n        },\r\n        series: seriesData.map(item => ({\r\n          name: item.name,\r\n          type: 'line',\r\n          stack: 'Total',\r\n          areaStyle: {},\r\n          emphasis: {\r\n            focus: 'series'\r\n          },\r\n          data: item.data\r\n        }))\r\n      }\r\n      \r\n      feedChart.setOption(option)\r\n    }\r\n    \r\n    // 生命周期钩子\r\n    onMounted(async () => {\r\n      // 获取数据\r\n      try {\r\n        await monitoringStore.fetchAllMonitoringData()\r\n      } catch (error) {\r\n        console.error('获取监控数据错误:', error)\r\n      }\r\n      \r\n      // 初始化图表\r\n      nextTick(() => {\r\n        initCharts()\r\n      })\r\n      \r\n      // 设置定时刷新\r\n      const refreshInterval = setInterval(() => {\r\n        refreshData()\r\n      }, 300000) // 每5分钟刷新一次\r\n      \r\n      // 组件卸载时清除定时器\r\n      onBeforeUnmount(() => {\r\n        clearInterval(refreshInterval)\r\n      })\r\n    })\r\n    \r\n    return {\r\n      // 状态\r\n      isCollapse,\r\n      activeMenu,\r\n      userName,\r\n      userAvatar,\r\n      userInitials,\r\n      isAdmin,\r\n      isRefreshing,\r\n      lastUpdatedTime,\r\n      pigDistributionChart,\r\n      feedConsumptionChart,\r\n      pigDataType,\r\n      feedTimeRange,\r\n      monitoringAreas,\r\n      pigStatus,\r\n      feedStocks,\r\n      cameraStreams,\r\n      activeAlerts,\r\n      historyAlerts,\r\n      alertsTab,\r\n      alertsLoading,\r\n      alertsPage,\r\n      alertsPageSize,\r\n      totalActiveAlerts,\r\n      totalHistoryAlerts,\r\n      activeAlertsCount,\r\n      alertDialogVisible,\r\n      selectedAlert,\r\n      \r\n      // 方法\r\n      toggleSidebar,\r\n      handleCommand,\r\n      refreshData,\r\n      getAreaStatusType,\r\n      getParamColor,\r\n      getParamClass,\r\n      viewAreaDetails,\r\n      viewAreaHistory,\r\n      updatePigChart,\r\n      updateFeedChart,\r\n      viewPigDetails,\r\n      exportPigData,\r\n      getFeedStockClass,\r\n      getFeedStockStatus,\r\n      orderFeed,\r\n      viewFullscreen,\r\n      viewRecordings,\r\n      cameraSettings,\r\n      getAlertTypeTag,\r\n      getAlertLevelTag,\r\n      showAlerts,\r\n      acknowledgeAlert,\r\n      acknowledgeAllAlerts,\r\n      viewAlertDetails,\r\n      acknowledgeAlertFromDialog,\r\n      exportAlerts,\r\n      handleAlertsPageChange,\r\n      handleAlertsPageSizeChange\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.monitoring-page {\r\n  height: 100vh;\r\n  overflow: hidden;\r\n}\r\n\r\n/* 侧边栏样式 */\r\n.sidebar {\r\n  background-color: #001529;\r\n  color: white;\r\n  height: 100vh;\r\n  overflow-y: auto;\r\n  transition: width 0.3s;\r\n}\r\n\r\n.logo-container {\r\n  padding: 20px;\r\n  text-align: center;\r\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1);\r\n}\r\n\r\n.logo {\r\n  height: 40px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.logo-container h2 {\r\n  font-size: 1.2rem;\r\n  margin: 0;\r\n  color: white;\r\n}\r\n\r\n.sidebar-menu {\r\n  border-right: none;\r\n}\r\n\r\n/* 头部样式 */\r\n.header {\r\n  background-color: white;\r\n  border-bottom: 1px solid #eee;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 0 20px;\r\n}\r\n\r\n.header-left {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.toggle-button {\r\n  margin-right: 15px;\r\n}\r\n\r\n.header-right {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.notification-badge {\r\n  margin-right: 20px;\r\n}\r\n\r\n.user-dropdown {\r\n  display: flex;\r\n  align-items: center;\r\n  cursor: pointer;\r\n}\r\n\r\n.username {\r\n  margin: 0 10px;\r\n}\r\n\r\n/* 主内容区样式 */\r\n.main-content {\r\n  padding: 20px;\r\n  height: calc(100vh - 60px);\r\n  overflow-y: auto;\r\n  background-color: #f5f7fa;\r\n}\r\n\r\n.monitoring-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.monitoring-header h1 {\r\n  margin: 0;\r\n  font-size: 1.8rem;\r\n  color: #333;\r\n}\r\n\r\n.monitoring-actions {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.last-updated {\r\n  margin-right: 15px;\r\n  color: #666;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n/* 监控区域样式 */\r\n.monitoring-section {\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.section-title {\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: 1.5rem;\r\n  color: #333;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.section-title .el-icon {\r\n  margin-right: 10px;\r\n}\r\n\r\n/* 环境卡片样式 */\r\n.env-card {\r\n  height: 100%;\r\n  margin-bottom: 20px;\r\n  transition: transform 0.3s;\r\n}\r\n\r\n.env-card:hover {\r\n  transform: translateY(-5px);\r\n}\r\n\r\n.env-card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 15px;\r\n  border-bottom: 1px solid #eee;\r\n}\r\n\r\n.env-card-header h3 {\r\n  margin: 0;\r\n  font-size: 1.2rem;\r\n}\r\n\r\n.env-card-body {\r\n  padding: 15px;\r\n}\r\n\r\n.env-param {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.env-param:last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.param-icon {\r\n  width: 40px;\r\n  height: 40px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background-color: #f5f7fa;\r\n  border-radius: 50%;\r\n  margin-right: 15px;\r\n}\r\n\r\n.param-info {\r\n  flex: 1;\r\n}\r\n\r\n.param-label {\r\n  font-size: 0.9rem;\r\n  color: #666;\r\n  margin-bottom: 5px;\r\n}\r\n\r\n.param-value {\r\n  font-size: 1.2rem;\r\n  font-weight: bold;\r\n}\r\n\r\n.param-normal {\r\n  color: #67C23A;\r\n}\r\n\r\n.param-warning {\r\n  color: #E6A23C;\r\n}\r\n\r\n.param-danger {\r\n  color: #F56C6C;\r\n}\r\n\r\n.param-trend {\r\n  margin-left: 10px;\r\n}\r\n\r\n.env-card-footer {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding: 10px 15px;\r\n  border-top: 1px solid #eee;\r\n}\r\n\r\n/* 猪群状态卡片样式 */\r\n.chart-card {\r\n  height: 100%;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.chart-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.chart-header h3 {\r\n  margin: 0;\r\n  font-size: 1.2rem;\r\n}\r\n\r\n.chart-container {\r\n  height: 300px;\r\n}\r\n\r\n.pig-status-card {\r\n  height: 100%;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.pig-status-content {\r\n  display: grid;\r\n  grid-template-columns: repeat(2, 1fr);\r\n  gap: 20px;\r\n  padding: 15px;\r\n}\r\n\r\n.status-item {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.status-label {\r\n  font-size: 0.9rem;\r\n  color: #666;\r\n  margin-bottom: 5px;\r\n}\r\n\r\n.status-value {\r\n  font-size: 1.8rem;\r\n  font-weight: bold;\r\n  color: #333;\r\n  margin-bottom: 5px;\r\n}\r\n\r\n.status-trend {\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.status-trend.up {\r\n  color: #67C23A;\r\n}\r\n\r\n.status-trend.down {\r\n  color: #F56C6C;\r\n}\r\n\r\n.pig-actions {\r\n  display: flex;\r\n  justify-content: center;\r\n  gap: 15px;\r\n  padding: 10px 15px;\r\n}\r\n\r\n/* 饲料状态卡片样式 */\r\n.feed-status-card {\r\n  height: 100%;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.feed-status-content {\r\n  padding: 15px;\r\n}\r\n\r\n.feed-item {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.feed-item:last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.feed-info {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.feed-name {\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\n.feed-stock-info {\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.stock-normal {\r\n  color: #67C23A;\r\n}\r\n\r\n.stock-warning {\r\n  color: #E6A23C;\r\n}\r\n\r\n.stock-danger {\r\n  color: #F56C6C;\r\n}\r\n\r\n.feed-actions {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-top: 10px;\r\n}\r\n\r\n.feed-estimate {\r\n  font-size: 0.9rem;\r\n  color: #666;\r\n}\r\n\r\n/* 摄像头卡片样式 */\r\n.camera-card {\r\n  height: 100%;\r\n  margin-bottom: 20px;\r\n  transition: transform 0.3s;\r\n}\r\n\r\n.camera-card:hover {\r\n  transform: translateY(-5px);\r\n}\r\n\r\n.camera-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 15px;\r\n  border-bottom: 1px solid #eee;\r\n}\r\n\r\n.camera-header h3 {\r\n  margin: 0;\r\n  font-size: 1.2rem;\r\n}\r\n\r\n.camera-stream {\r\n  height: 180px;\r\n  overflow: hidden;\r\n  position: relative;\r\n}\r\n\r\n.camera-stream img {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n}\r\n\r\n.camera-offline {\r\n  height: 180px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  background-color: #f5f7fa;\r\n  color: #909399;\r\n}\r\n\r\n.camera-offline p {\r\n  margin-top: 10px;\r\n}\r\n\r\n.camera-actions {\r\n  padding: 10px 15px;\r\n  border-top: 1px solid #eee;\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n/* 告警卡片样式 */\r\n.alerts-card {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.alert-tabs {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.alert-actions {\r\n  display: flex;\r\n  gap: 10px;\r\n}\r\n\r\n.alert-badge {\r\n  margin-left: 10px;\r\n}\r\n\r\n.pagination-container {\r\n  margin-top: 20px;\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n/* 告警详情对话框样式 */\r\n.alert-detail {\r\n  max-height: 500px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.alert-detail-item {\r\n  margin-bottom: 15px;\r\n  display: flex;\r\n}\r\n\r\n.detail-label {\r\n  width: 100px;\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\n.detail-value {\r\n  flex: 1;\r\n}\r\n\r\n.parameters-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 5px;\r\n}\r\n\r\n.parameter-item {\r\n  display: flex;\r\n}\r\n\r\n.parameter-name {\r\n  width: 120px;\r\n  color: #666;\r\n}\r\n\r\n.parameter-value {\r\n  flex: 1;\r\n}\r\n\r\n/* 响应式调整 */\r\n@media (max-width: 768px) {\r\n  .sidebar {\r\n    position: fixed;\r\n    z-index: 1000;\r\n  }\r\n  \r\n  .main-content {\r\n    padding: 15px;\r\n  }\r\n  \r\n  .monitoring-header {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n  }\r\n  \r\n  .monitoring-actions {\r\n    margin-top: 10px;\r\n  }\r\n  \r\n  .pig-status-content {\r\n    grid-template-columns: 1fr;\r\n  }\r\n  \r\n  .camera-stream,\r\n  .camera-offline {\r\n    height: 150px;\r\n  }\r\n  \r\n  .alert-detail-item {\r\n    flex-direction: column;\r\n  }\r\n  \r\n  .detail-label {\r\n    width: 100%;\r\n    margin-bottom: 5px;\r\n  }\r\n}\r\n\r\n@media (max-width: 576px) {\r\n  .card-header {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n  }\r\n  \r\n  .alert-actions {\r\n    margin-top: 10px;\r\n  }\r\n  \r\n  .chart-header {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n  }\r\n  \r\n  .chart-header h3 {\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}