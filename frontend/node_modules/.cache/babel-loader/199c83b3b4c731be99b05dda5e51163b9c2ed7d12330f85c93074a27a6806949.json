{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"signup-page\"\n};\nconst _hoisted_2 = {\n  class: \"signup-container\"\n};\nconst _hoisted_3 = {\n  class: \"signup-card\"\n};\nconst _hoisted_4 = {\n  class: \"signup-footer\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_Navbar = _resolveComponent(\"Navbar\");\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_Navbar), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_cache[8] || (_cache[8] = _createElementVNode(\"div\", {\n    class: \"signup-header\"\n  }, [_createElementVNode(\"h2\", null, \"注册账号\"), _createElementVNode(\"p\", null, \"加入泓泰生物科技智能养殖管理系统\")], -1 /* HOISTED */)), _createVNode(_component_el_form, {\n    ref: \"signupFormRef\",\n    model: $setup.formData,\n    rules: $setup.signupRules,\n    \"label-position\": \"top\",\n    onSubmit: _withModifiers($setup.handleSignUp, [\"prevent\"])\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_form_item, {\n      label: \"用户名\",\n      prop: \"username\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $setup.formData.username,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.formData.username = $event),\n        placeholder: \"请输入用户名\",\n        \"prefix-icon\": $setup.User\n      }, null, 8 /* PROPS */, [\"modelValue\", \"prefix-icon\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      label: \"邮箱\",\n      prop: \"email\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $setup.formData.email,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.formData.email = $event),\n        type: \"email\",\n        placeholder: \"请输入邮箱\",\n        \"prefix-icon\": $setup.Message\n      }, null, 8 /* PROPS */, [\"modelValue\", \"prefix-icon\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      label: \"密码\",\n      prop: \"password\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $setup.formData.password,\n        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.formData.password = $event),\n        type: \"password\",\n        placeholder: \"请输入密码\",\n        \"prefix-icon\": $setup.Lock,\n        \"show-password\": \"\"\n      }, null, 8 /* PROPS */, [\"modelValue\", \"prefix-icon\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      label: \"确认密码\",\n      prop: \"confirmPassword\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $setup.formData.confirmPassword,\n        \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.formData.confirmPassword = $event),\n        type: \"password\",\n        placeholder: \"请再次输入密码\",\n        \"prefix-icon\": $setup.Lock,\n        \"show-password\": \"\"\n      }, null, 8 /* PROPS */, [\"modelValue\", \"prefix-icon\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, null, {\n      default: _withCtx(() => [_createVNode(_component_el_button, {\n        type: \"primary\",\n        \"native-type\": \"submit\",\n        loading: $setup.loading,\n        class: \"signup-button\"\n      }, {\n        default: _withCtx(() => _cache[4] || (_cache[4] = [_createTextVNode(\" 注册 \")])),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"loading\"])]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"model\", \"rules\", \"onSubmit\"]), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"p\", null, [_cache[6] || (_cache[6] = _createTextVNode(\" 已有账号？ \")), _createVNode(_component_el_button, {\n    link: \"\",\n    onClick: $setup.goToLogin\n  }, {\n    default: _withCtx(() => _cache[5] || (_cache[5] = [_createTextVNode(\"立即登录\")])),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"onClick\"])]), _cache[7] || (_cache[7] = _createElementVNode(\"p\", null, [_createTextVNode(\"注册即表示同意\"), _createElementVNode(\"a\", {\n    href: \"/terms\"\n  }, \"服务条款\"), _createTextVNode(\"和\"), _createElementVNode(\"a\", {\n    href: \"/privacy\"\n  }, \"隐私政策\")], -1 /* HOISTED */))])])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_Navbar","_createElementVNode","_hoisted_2","_hoisted_3","_component_el_form","ref","model","$setup","formData","rules","signupRules","onSubmit","_withModifiers","handleSignUp","default","_withCtx","_component_el_form_item","label","prop","_component_el_input","modelValue","username","_cache","$event","placeholder","User","_","email","type","Message","password","Lock","confirmPassword","_component_el_button","loading","_createTextVNode","_hoisted_4","link","onClick","goToLogin","href"],"sources":["C:\\Users\\Scott\\Downloads\\毕设\\frontend\\src\\views\\public\\SignUp.vue"],"sourcesContent":["<template>\r\n  <div class=\"signup-page\">\r\n    <Navbar />\r\n    \r\n    <div class=\"signup-container\">\r\n      <div class=\"signup-card\">\r\n        <div class=\"signup-header\">\r\n          <h2>注册账号</h2>\r\n          <p>加入泓泰生物科技智能养殖管理系统</p>\r\n        </div>\r\n        \r\n        <el-form\r\n          ref=\"signupFormRef\"\r\n          :model=\"formData\"\r\n          :rules=\"signupRules\"\r\n          label-position=\"top\"\r\n          @submit.prevent=\"handleSignUp\"\r\n        >\r\n          <el-form-item label=\"用户名\" prop=\"username\">\r\n            <el-input\r\n              v-model=\"formData.username\"\r\n              placeholder=\"请输入用户名\"\r\n              :prefix-icon=\"User\"\r\n            />\r\n          </el-form-item>\r\n          \r\n          <el-form-item label=\"邮箱\" prop=\"email\">\r\n            <el-input\r\n              v-model=\"formData.email\"\r\n              type=\"email\"\r\n              placeholder=\"请输入邮箱\"\r\n              :prefix-icon=\"Message\"\r\n            />\r\n          </el-form-item>\r\n          \r\n          <el-form-item label=\"密码\" prop=\"password\">\r\n            <el-input\r\n              v-model=\"formData.password\"\r\n              type=\"password\"\r\n              placeholder=\"请输入密码\"\r\n              :prefix-icon=\"Lock\"\r\n              show-password\r\n            />\r\n          </el-form-item>\r\n          \r\n          <el-form-item label=\"确认密码\" prop=\"confirmPassword\">\r\n            <el-input\r\n              v-model=\"formData.confirmPassword\"\r\n              type=\"password\"\r\n              placeholder=\"请再次输入密码\"\r\n              :prefix-icon=\"Lock\"\r\n              show-password\r\n            />\r\n          </el-form-item>\r\n          \r\n          <el-form-item>\r\n            <el-button\r\n              type=\"primary\"\r\n              native-type=\"submit\"\r\n              :loading=\"loading\"\r\n              class=\"signup-button\"\r\n            >\r\n              注册\r\n            </el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n        \r\n        <div class=\"signup-footer\">\r\n          <p>\r\n            已有账号？\r\n            <el-button link @click=\"goToLogin\">立即登录</el-button>\r\n          </p>\r\n          <p>注册即表示同意<a href=\"/terms\">服务条款</a>和<a href=\"/privacy\">隐私政策</a></p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, reactive } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { ElMessage } from 'element-plus'\r\nimport { User, Lock, Message } from '@element-plus/icons-vue'\r\nimport Navbar from '@/components/layout/Navbar.vue'\r\nimport api from '@/utils/api'\r\n\r\nexport default {\r\n  name: 'SignUpPage',\r\n  components: {\r\n    Navbar\r\n  },\r\n  \r\n  setup() {\r\n    const router = useRouter()\r\n    const signupFormRef = ref(null)\r\n    \r\n    const formData = reactive({\r\n      username: '',\r\n      email: '',\r\n      password: '',\r\n      confirmPassword: ''\r\n    })\r\n    \r\n    const loading = ref(false)\r\n    \r\n    const validatePass = (rule, value, callback) => {\r\n      if (value === '') {\r\n        callback(new Error('请输入密码'))\r\n      } else {\r\n        if (formData.confirmPassword !== '') {\r\n          signupFormRef.value?.validateField('confirmPassword')\r\n        }\r\n        callback()\r\n      }\r\n    }\r\n    \r\n    const validatePass2 = (rule, value, callback) => {\r\n      if (value === '') {\r\n        callback(new Error('请再次输入密码'))\r\n      } else if (value !== formData.password) {\r\n        callback(new Error('两次输入密码不一致'))\r\n      } else {\r\n        callback()\r\n      }\r\n    }\r\n    \r\n    const signupRules = {\r\n      username: [\r\n        { required: true, message: '请输入用户名', trigger: 'blur' },\r\n        { min: 3, max: 20, message: '用户名长度应为3-20个字符', trigger: 'blur' }\r\n      ],\r\n      email: [\r\n        { required: true, message: '请输入邮箱地址', trigger: 'blur' },\r\n        { type: 'email', message: '请输入正确的邮箱地址', trigger: 'blur' }\r\n      ],\r\n      password: [\r\n        { required: true, validator: validatePass, trigger: 'blur' },\r\n        { min: 6, message: '密码长度至少为6个字符', trigger: 'blur' }\r\n      ],\r\n      confirmPassword: [\r\n        { required: true, validator: validatePass2, trigger: 'blur' }\r\n      ]\r\n    }\r\n    \r\n    const handleSignUp = async () => {\r\n      if (!signupFormRef.value) return\r\n      \r\n      await signupFormRef.value.validate(async (valid) => {\r\n        if (valid) {\r\n          try {\r\n            loading.value = true\r\n            const response = await api.post('/auth/register', {\r\n              username: formData.username,\r\n              email: formData.email,\r\n              password: formData.password\r\n            })\r\n            \r\n            if (response.status === 200) {\r\n              ElMessage.success('注册成功')\r\n              router.push('/login')\r\n            } else {\r\n              ElMessage.error(response.data.message || '注册失败')\r\n            }\r\n          } catch (error) {\r\n            console.error('注册错误:', error)\r\n            ElMessage.error(error.response?.data?.message || '注册失败，请稍后再试')\r\n          } finally {\r\n            loading.value = false\r\n          }\r\n        }\r\n      })\r\n    }\r\n    \r\n    const goToLogin = () => {\r\n      router.push('/login')\r\n    }\r\n    \r\n    return {\r\n      signupFormRef,\r\n      formData,\r\n      signupRules,\r\n      loading,\r\n      handleSignUp,\r\n      goToLogin,\r\n      User,\r\n      Lock,\r\n      Message\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.signup-page {\r\n  min-height: 100vh;\r\n  background-color: #f5f7fa;\r\n}\r\n\r\n.signup-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  padding: 60px 20px;\r\n}\r\n\r\n.signup-card {\r\n  width: 100%;\r\n  max-width: 450px;\r\n  background-color: white;\r\n  border-radius: 8px;\r\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);\r\n  padding: 40px;\r\n}\r\n\r\n.signup-header {\r\n  text-align: center;\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.signup-header h2 {\r\n  font-size: 1.8rem;\r\n  color: #333;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.signup-header p {\r\n  color: #666;\r\n  font-size: 1rem;\r\n}\r\n\r\n.signup-button {\r\n  width: 100%;\r\n  padding: 12px 0;\r\n  font-size: 1.1rem;\r\n}\r\n\r\n.signup-footer {\r\n  text-align: center;\r\n  margin-top: 20px;\r\n  color: #999;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.signup-footer a {\r\n  color: #409EFF;\r\n  text-decoration: none;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .signup-card {\r\n    padding: 20px;\r\n  }\r\n  \r\n  .signup-header h2 {\r\n    font-size: 1.5rem;\r\n  }\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}